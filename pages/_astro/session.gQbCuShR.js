let l=[],o=(f,i)=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:i||0,lc:0,listen(u,s){return t.lc=n.push(u,s||t.l)/2,()=>{let e=n.indexOf(u);~e&&(n.splice(e,2),--t.lc||t.off())}},notify(u){let s=!l.length;for(let e=0;e<n.length;e+=2)l.push(n[e],n[e+1],t.value,u);if(s){for(let e=0;e<l.length;e+=4){let a;for(let r=e+1;!a&&(r+=4)<l.length;)l[r]<l[e+1]&&(a=l.push(l[e],l[e+1],l[e+2],l[e+3]));a||l[e](l[e+2],l[e+3])}l.length=0}},off(){},set(u){t.value!==u&&(t.value=u,t.notify())},subscribe(u,s){let e=t.listen(u,s);return u(t.value),e},value:f};return t},v=(f={})=>{let i=o(f);return i.setKey=function(n,t){typeof t>"u"?n in i.value&&(i.value={...i.value},delete i.value[n],i.notify(n)):i.value[n]!==t&&(i.value={...i.value,[n]:t},i.notify(n))},i};const p={sentinelHeader:!0,stateNavApp:null},c=v(p);export{o as a,v as m,c as s};
